<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Ltt"><title>JetpackCompose学习系列一：基本概念与传统 View 迁移 · Puppet</title><meta name="description" content="一、前言
二、什么是 Jetpack Compose

核心理念
关键要素
优势


三、声明式 UI

1. 核心定义
2. 关键特性与优势


四、独立于平台与跨平台

1. KMP
2. Compose Multiplatform
3. 三者的关系


五、Jetpack Compose 的分"><meta name="keywords" content="技术博客,Hexo,Android,Linux,HTML,Java"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.webp"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/insight.css"><link rel="stylesheet" href="/css/search.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div class="page-top animated fadeInDown"><div class="nav"><li> <a href="/">首页</a></li><li> <a href="/archives">归档</a></li><li> <a href="/tags">标签</a></li><li> <a href="/about">关于</a></li></div><div class="information"><div class="nav_right_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"></div></div></div><div class="sidebar animated fadeInDown"><div class="sidebar-top"><div class="logo-title"><div class="title"><img src="/images/logo@2x.webp" style="width:220px;" alt="favicon"><h3 title=""><a href="/">Puppet</a></h3><div class="description"><p>心之所愿，无事不成。<br> Nothing is impossible to a willing heart.</p></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/puppet16"><i class="fa fa-github"></i></a></li><li><a href="mailto:mailto:2542469086@qq.com"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="http://sighttp.qq.com/authd?IDKEY=http://sighttp.qq.com/authd?IDKEY="><i class="fa fa-qq"></i></a></li><li><a target="_blank" rel="noopener" href="https://zhihu.com/"><i class="fa fa-mortar-board"></i></a></li></ul></div></div><div class="footer"><div class="p"> <span> 全站CC-BY-SA-3.0 </span><i class="fa fa-star"></i><span> Ltt</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/zh-cn/" target="_blank">Hexo </a><span> & </span><span>Anatolo </span></div><div class="beian"></div></div></div><div class="main"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>JetpackCompose学习系列一：基本概念与传统 View 迁移</a></h3></div><div class="post-content"><p><div class="toc">
<!-- toc -->
<ul>
<li><a href="#%E4%B8%80-%E5%89%8D%E8%A8%80">一、前言</a></li>
<li><a href="#%E4%BA%8C-%E4%BB%80%E4%B9%88%E6%98%AF-jetpack-compose">二、什么是 Jetpack Compose</a>
<ul>
<li><a href="#%E6%A0%B8%E5%BF%83%E7%90%86%E5%BF%B5">核心理念</a></li>
<li><a href="#%E5%85%B3%E9%94%AE%E8%A6%81%E7%B4%A0">关键要素</a></li>
<li><a href="#%E4%BC%98%E5%8A%BF">优势</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89-%E5%A3%B0%E6%98%8E%E5%BC%8F-ui">三、声明式 UI</a>
<ul>
<li><a href="#1-%E6%A0%B8%E5%BF%83%E5%AE%9A%E4%B9%89">1. 核心定义</a></li>
<li><a href="#2-%E5%85%B3%E9%94%AE%E7%89%B9%E6%80%A7%E4%B8%8E%E4%BC%98%E5%8A%BF">2. 关键特性与优势</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B-%E7%8B%AC%E7%AB%8B%E4%BA%8E%E5%B9%B3%E5%8F%B0%E4%B8%8E%E8%B7%A8%E5%B9%B3%E5%8F%B0">四、独立于平台与跨平台</a>
<ul>
<li><a href="#1-kmp">1. KMP</a></li>
<li><a href="#2-compose-multiplatform">2. Compose Multiplatform</a></li>
<li><a href="#3-%E4%B8%89%E8%80%85%E7%9A%84%E5%85%B3%E7%B3%BB">3. 三者的关系</a></li>
</ul>
</li>
<li><a href="#%E4%BA%94-jetpack-compose-%E7%9A%84%E5%88%86%E5%8C%85%E7%BB%93%E6%9E%84">五、Jetpack Compose 的分包结构</a>
<ul>
<li><a href="#1-compile-%E5%BA%93">1. compile 库</a></li>
<li><a href="#2-runtime-%E5%BA%93">2. runtime 库</a></li>
<li><a href="#3-ui-%E5%BA%93">3. UI 库</a></li>
<li><a href="#4-animation">4. animation</a></li>
<li><a href="#5-foundation">5. foundation</a></li>
<li><a href="#6-materialmaterial3">6. material/material3</a></li>
<li><a href="#7-%E6%80%BB%E7%BB%93">7. 总结</a></li>
</ul>
</li>
<li><a href="#%E5%85%AD-%E4%B8%80%E4%BA%9B%E4%BC%A0%E7%BB%9F%E7%BB%84%E4%BB%B6%E7%9A%84-compose-%E5%B9%B3%E6%9B%BF">六、一些传统组件的 Compose 平替</a>
<ul>
<li><a href="#1-imageview">1. ImageView</a></li>
<li><a href="#2-textview">2. TextView</a></li>
<li><a href="#3-framelayout">3. FrameLayout</a></li>
<li><a href="#4-linearlayout">4. LinearLayout</a></li>
<li><a href="#5-relativelayout">5. RelativeLayout</a></li>
<li><a href="#6-constraintlayout">6. ConstraintLayout</a></li>
<li><a href="#7-scrollview">7. ScrollView</a></li>
<li><a href="#8-recyclerview">8. RecyclerView</a></li>
<li><a href="#9-button">9. Button</a></li>
</ul>
</li>
<li><a href="#%E4%B8%83-modifier-%E7%BB%8F%E5%85%B8%E6%96%B9%E6%B3%95">七、Modifier 经典方法</a>
<ul>
<li><a href="#1-%E5%86%85%E5%A4%96%E8%BE%B9%E8%B7%9D">1. 内外边距</a></li>
<li><a href="#2-size-width-height">2. size、width、height</a></li>
<li><a href="#3-background-%E4%B8%8E-clip">3. background 与 clip</a></li>
<li><a href="#4-click-%E7%9B%91%E5%90%AC">4. click 监听</a></li>
<li><a href="#5-modifier-%E6%80%BB%E7%BB%93">5. Modifier 总结</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
</div>
<h2><a href="#一-前言" class="header-anchor">#</a><span id="一-前言">一、前言</span></h2>
<ol>
<li>本文主要讲述<strong>Jetpack Compose 的基本概念及分包</strong></li>
<li><strong>Google 官网：<a target="_blank" rel="noopener" href="https://developer.android.com/develop/ui/compose/documentation?hl=zh-cn">https://developer.android.com/develop/ui/compose/documentation?hl=zh-cn</a></strong></li>
</ol>
<h2><a href="#二-什么是-jetpack-compose" class="header-anchor">#</a><span id="二-什么是-jetpack-compose">二、什么是 Jetpack Compose</span></h2>
<p><code>Jetpack Compose</code> 是 <code>Android</code> 官方推出的现代声明式 <code>UI</code> 工具包，基于 <code>Kotlin</code>，用函数式与响应式模型来构建界面，不再使用 <code>XML</code> 布局，通过调用带有 <code>@Composable</code> 的函数描述 <code>UI</code>，数据变更时框架自动重组并更新界面。</p>
<h3><a href="#核心理念" class="header-anchor">#</a><span id="核心理念">核心理念</span></h3>
<ul>
<li><strong>声明式 UI</strong>: “描述是什么”而非“如何绘制”，让 <code>UI</code> 与状态天然同步。</li>
<li><strong>可组合性</strong>: 通过小而可复用的 @Composable 函数组合出复杂界面。</li>
<li><strong>状态驱动</strong>: 以状态为单一数据源 <em>（如 remember/rememberSaveable）</em>，数据变化触发重组。</li>
<li><strong>单向数据流</strong>: 降低副作用与耦合，便于测试与维护。</li>
</ul>
<h3><a href="#关键要素" class="header-anchor">#</a><span id="关键要素">关键要素</span></h3>
<ul>
<li><strong><code>@Composable</code> 函数</strong>: <code>UI</code> 的基本构建单元，可相互调用。</li>
<li><strong><code>setContent(...)</code></strong>: 在 <code>Activity/Fragment</code> 中作为 <code>Compose</code> 的入口。</li>
<li><strong><code>Modifier</code></strong>: 用于布局、交互与装饰的可链式配置。</li>
<li><strong><code>Material</code> 设计</strong>: 原生支持 <code>Material 3</code> 主题与组件，轻松统一风格。</li>
<li><strong>列表与动画</strong>: 提供高性能 <code>LazyColumn</code> 等列表与易用动画 <code>API</code>。</li>
</ul>
<h3><a href="#优势" class="header-anchor">#</a><span id="优势">优势</span></h3>
<ul>
<li><strong>减少样板代码</strong>: 无需 <code>XML</code> 与 <code>findViewById</code>，代码更少更直观。</li>
<li><strong>更高复用与可测试性</strong>: 小型可组合项易拆分、易复用、易测试。</li>
<li><strong>与传统 <code>View</code> 互操作</strong>: 可在现有应用中渐进式采用 <code>Compose</code>。</li>
<li><strong>生产力提升</strong>: 预览、热重载等工具链支持更高效的 <code>UI</code> 开发。</li>
</ul>
<h2><a href="#三-声明式-ui" class="header-anchor">#</a><span id="三-声明式-ui">三、声明式 UI</span></h2>
<h3><a href="#1-核心定义" class="header-anchor">#</a><span id="1-核心定义">1. 核心定义</span></h3>
<p>用“描述界面在某状态下应该长什么样”的方式构建 <code>UI</code>，将界面视为状态的纯函数：<strong><code>UI = f(state)</code></strong>。当状态变化时，框架自动计算差异并更新界面，而非手动操作控件树。</p>
<p>传统 <code>Android</code> 界面采用命令式更新：通过 <code>findViewById()</code> 手动操作各个 <code>View</code>（<em>如 setText、addChild、setImageBitmap）</em>。这易遗漏同步、产生竞态与异常，且视图越多维护复杂度越高。</p>
<p>声明式模型 <em>（Compose）</em> 以“数据描述界面”：<strong>状态变更时由框架“从概念上重生成”界面并自动应用差异，避免手动同步有状态视图树</strong>。与命令式的对比，不再通过 <code>setText</code>、<code>addChild</code> 等步骤性命令修改内部状态，改为重建/重组界面描述并由框架调度最小必要更新，减少同步与时序错误。<br>
为控制性能成本，<code>Compose</code> 通过“重组”智能只更新必要部分，<strong>因此应将 <code>UI</code> 拆成小而可复用、无副作用的可组合项，配合单向数据流以最小化重组范围并提升可维护性</strong>。</p>
<h3><a href="#2-关键特性与优势" class="header-anchor">#</a><span id="2-关键特性与优势">2. 关键特性与优势</span></h3>
<p><strong>状态驱动与单向数据流</strong>: 单一可信数据源驱动 <code>UI</code>，<strong>数据向下流动、事件向上冒泡</strong>。<br>
<strong>可组合与可复用</strong>: 小而纯的组件组合出复杂界面，易于测试与维护。<br>
<strong>差量更新机制</strong>: 通过重组/协调 <em>（如 Compose 的重组、React 的协调）</em> 只更新必要部分，兼顾性能。<br>
<strong>优势</strong>: 降低样板与复杂度，减少状态错位与竞态，更易测试与主题化，提升迭代效率。<br>
<strong>代价与实践</strong>: <strong>需要合理拆分组件、提升纯度与最小副作用，做好状态提升与作用域管理，以获得更高效的重组/协调</strong>。<br>
<strong>代表实现</strong>: <code>Jetpack Compose</code>、<code>React</code>、<code>SwiftUI</code> 等</p>
<h2><a href="#四-独立于平台与跨平台" class="header-anchor">#</a><span id="四-独立于平台与跨平台">四、独立于平台与跨平台</span></h2>
<p><code>Jetpack Compose</code> 是独立于 <code>Android</code> 平台的，它里面的上层暴露给开发者使用的（各种类、接口、参数等等）都与 Android 无关，只有最底层真正绘制才与 Android 有关。类似的有 <code>RecyclerView</code>、<code>ConstraintLayout</code>、<code>AppCompat</code> 等库不依赖最新版 <code>Android</code> 。</p>
<p>独立平台的下一步就能很方便的跨平台。</p>
<p>我们思考一下， <code>Jetpack Compose</code> 的预览功能？它并非是在模拟器里实现的，而是直接在 <code>Android Studio</code> 里实现的功能，换句话说是在 <code>Mac</code> 平台 和 <code>Windows</code> 平台上实现了依赖 <code>Android Studio</code> 的  <code>Jetpack Compose</code> 的显示系统。</p>
<h3><a href="#1-kmp" class="header-anchor">#</a><span id="1-kmp">1. KMP</span></h3>
<blockquote>
<p><code>KMP</code> 官网: <a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/multiplatform.html"><code>https://kotlinlang.org/docs/multiplatform.html</code></a></p>
</blockquote>
<p><code>Kotlin Multiplatform (KMP)</code> 是 <code>Kotlin</code> 官方提供的跨平台机制。<br>
<strong>目标</strong>：写的业务逻辑 *（比如网络请求、数据存储、算法）*一次编写，多平台共享。<br>
<strong>大概结构</strong>：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">commonMain/ → 公共代码（Kotlin 编写，逻辑共享）</span><br><span class="line"></span><br><span class="line">androidMain/ → Android 特有实现</span><br><span class="line"></span><br><span class="line">iosMain/ → iOS 特有实现</span><br></pre></td></tr></table></figure>
<p>这样，业务逻辑在 <code>commonMain</code> 写一次，平台差异化部分在各自 <code>xxxMain</code> 里补充。和 <code>Flutter</code> 很类似</p>
<p>其中，<strong><code>KMP</code> 只负责逻辑共享，<code>UI</code> 还是各写各的</strong> <code>（Android 用 Compose，iOS 用 SwiftUI）</code>。</p>
<h3><a href="#2-compose-multiplatform" class="header-anchor">#</a><span id="2-compose-multiplatform">2. Compose Multiplatform</span></h3>
<blockquote>
<p>官网: <a target="_blank" rel="noopener" href="https://www.jetbrains.com/compose-multiplatform/">https://www.jetbrains.com/compose-multiplatform/</a></p>
</blockquote>
<p><code>Compose Multiplatform</code> 由 <code>JetBrains</code> 与 <code>Google</code> 合作，把 <code>Jetpack Compose</code> 的技术扩展到 <code>Android、iOS、Desktop、Web</code>。<br>
如此，就可以在 <code>commonMain</code> 里写 <code>UI</code> 代码，一套 <code>UI</code> 同时跑在多个端。</p>
<h3><a href="#3-三者的关系" class="header-anchor">#</a><span id="3-三者的关系">3. 三者的关系</span></h3>
<p><strong>Jetpack Compose</strong> 是 <code>Android</code> 专属的现代 <code>UI</code> 框架。<br>
<strong>KMP</strong> 是 <code>Kotlin</code> 提供的跨平台逻辑共享机制，不关心 <code>UI</code>。<br>
<strong>Compose Multiplatform</strong> 是基于 <code>KMP</code> 之上扩展，把 <code>UI</code> 也跨平台复用。</p>
<h2><a href="#五-jetpack-compose-的分包结构" class="header-anchor">#</a><span id="五-jetpack-compose-的分包结构">五、Jetpack Compose 的分包结构</span></h2>
<p>官网：<a target="_blank" rel="noopener" href="https://developer.android.com/jetpack/androidx/releases/compose?hl=zh-cn">https://developer.android.com/jetpack/androidx/releases/compose?hl=zh-cn</a></p>
<p><code>Compose</code> 由 <code>androidx</code> 中的 <strong>7</strong> 个 <code>Maven</code> 组 <code>ID</code> 构成。每个组都包含一套特定用途的功能。</p>
<table>
<thead>
<tr>
<th>组</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>compose.animation</td>
<td>在 Jetpack Compose 应用中构建动画，丰富用户体验。</td>
</tr>
<tr>
<td>compose.compiler</td>
<td>借助 Kotlin 编译器插件，转换 @Composable functions（可组合函数）并启用优化功能。</td>
</tr>
<tr>
<td>compose.foundation</td>
<td>使用现成可用的构建块编写 Jetpack Compose 应用，还可扩展 Foundation 以构建您自己的设计系统元素。</td>
</tr>
<tr>
<td>compose.material</td>
<td>使用现成可用的 Material Design 组件构建 Jetpack Compose UI。这是更高层级的 Compose 入口点，旨在提供与 <code>www.material.io</code> 上描述的组件一致的组件。</td>
</tr>
<tr>
<td>compose.material3</td>
<td>使用 Material Design 3（新一代 Material Design）组件构建 Jetpack Compose UI。Material 3 中包括了更新后的主题和组件，以及动态配色等 Material You 个性化功能，旨在与新的 Android 12 视觉风格和系统界面相得益彰。</td>
</tr>
<tr>
<td>compose.runtime</td>
<td>Compose 编程模型和状态管理的基本构建块，以及 Compose 编译器插件的目标核心运行时。</td>
</tr>
<tr>
<td>compose.ui</td>
<td>与设备互动所需的 Compose UI 的基本组件，包括布局、绘图和输入。</td>
</tr>
</tbody>
</table>
<p><code>Material</code> 库 和 <code>Material 3</code> 库，这两个是 <code>Material Design</code> 的不同分支，<code>Material</code> 针对的是的<code>Material 2</code>规范。 可以将 <code>Material</code> 和 <code>Material 3</code> 这两个库视为同一个功能库。</p>
<p>分包是为了将来扩展方便。</p>
<h3><a href="#1-compile-库" class="header-anchor">#</a><span id="1-compile-库">1. compile 库</span></h3>
<p>用于编译 <code>@Compose</code> 函数，需要在 <code>build.gradle</code> 文件里做如下配置才可以启用：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    buildFeatures &#123;</span><br><span class="line">        compose = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    composeOptions &#123;</span><br><span class="line">        kotlinCompilerExtensionVersion = <span class="string">&quot;1.5.1&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3><a href="#2-runtime-库" class="header-anchor">#</a><span id="2-runtime-库">2. runtime 库</span></h3>
<p>包含整个 <code>Compose</code> 最底层的概念模型，比如：数据结构、状态转换机制等。<code>State</code> 就在这个库里。</p>
<h3><a href="#3-ui-库" class="header-anchor">#</a><span id="3-ui-库">3. UI 库</span></h3>
<p>提供 UI 相关最基础的功能，比如：测量、布局、绘制、触摸反馈等。所有的控件函数最终都会调用 <code>Layout()</code> 函数，该函数位于 <code>UI</code> 库。</p>
<h3><a href="#4-animation" class="header-anchor">#</a><span id="4-animation">4. animation</span></h3>
<p>基于 UI 实现的一系列动画。</p>
<h3><a href="#5-foundation" class="header-anchor">#</a><span id="5-foundation">5. foundation</span></h3>
<p>提供相对完整可用的 UI 体系，比如： <code>Row</code>、<code>Image</code> 等组件都在该库</p>
<h3><a href="#6-materialmaterial3" class="header-anchor">#</a><span id="6-materialmaterial3">6. material/material3</span></h3>
<p>实现了 <code>Maerial Design</code> 的一系列组件。 比如 <code>Button</code> 点击有水波纹效果等。</p>
<h3><a href="#7-总结" class="header-anchor">#</a><span id="7-总结">7. 总结</span></h3>
<p><strong><code>compiler --&gt; runtime --&gt; UI --&gt; animation --&gt; foundation --&gt; material/material3</code></strong></p>
<p>如上所示，从左到右，库是层层依赖的关系。</p>
<p>在各库组下还有诸多的库，一般来说，只需要引入与组名相同的包即可，该库就会有绝大部分功能，但是像测试等功能是不在该库内的。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// compose 相关的一些库</span></span><br><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">// Compose BOM（替换 &lt;bom-version&gt; 为最新）</span></span><br><span class="line">    <span class="keyword">def</span> composeBom = platform(<span class="string">&quot;androidx.compose:compose-bom:&lt;bom-version&gt;&quot;</span>)</span><br><span class="line">    implementation composeBom</span><br><span class="line">    androidTestImplementation composeBom</span><br><span class="line"></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.ui:ui&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.ui:ui-graphics&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.ui:ui-tooling-preview&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.foundation:foundation&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.animation:animation&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.runtime:runtime&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.runtime:runtime-livedata&quot;</span></span><br><span class="line"></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.material3:material3&quot;</span></span><br><span class="line">    <span class="comment">// 提供 material 的矢量图</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.compose.material:material-icons-extended&quot;</span></span><br><span class="line"></span><br><span class="line">    implementation <span class="string">&quot;androidx.activity:activity-compose:&lt;version&gt;&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.lifecycle:lifecycle-runtime-compose:&lt;version&gt;&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.lifecycle:lifecycle-viewmodel-compose:&lt;version&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">    implementation <span class="string">&quot;androidx.navigation:navigation-compose:&lt;version&gt;&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.constraintlayout:constraintlayout-compose:&lt;version&gt;&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.paging:paging-compose:&lt;version&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">    implementation <span class="string">&quot;io.coil-kt:coil-compose:&lt;version&gt;&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;androidx.hilt:hilt-navigation-compose:&lt;version&gt;&quot;</span></span><br><span class="line">    implementation <span class="string">&quot;com.google.accompanist:accompanist-systemuicontroller:&lt;version&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">    debugImplementation <span class="string">&quot;androidx.compose.ui:ui-tooling&quot;</span> <span class="comment">// 提供预览功能</span></span><br><span class="line">    debugImplementation <span class="string">&quot;androidx.compose.ui:ui-test-manifest&quot;</span></span><br><span class="line">    androidTestImplementation <span class="string">&quot;androidx.compose.ui:ui-test-junit4&quot;</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比如 <code>UI</code> 库，只需要引入 <code>androidx.compose.ui:ui</code> 即可使用大部分功能，但是不包括一些 UI 测试、 UI 预览等功能。<br>
<code>androidx.compose.ui:ui-tooling</code> 提供了预览功能，其中包括 <code>UI</code> 的预览，还有预览界面上的 交互按钮、部署按钮。它依赖 <code>androidx.compose.ui:ui-tooling-preview</code> 库，该库提供 <code>UI</code> 的预览。<br>
``</p>
<p>三条包引入原则：</p>
<ul>
<li>写代码的时候，依赖 <code>material(3)</code>就够了；或者跳过 <code>material</code> 依赖 <code>foundation</code> 使用基本的 UI 样式</li>
<li>如果需要预览功能，需要添加 <code>ui-tooling</code> 库</li>
<li>如果需要 <code>Material Design</code> 的大量矢量图标，引入 <code>material-icons-extended</code> 库。<code>material(3)</code> 只有少部分矢量图标。</li>
</ul>
<h2><a href="#六-一些传统组件的-compose-平替" class="header-anchor">#</a><span id="六-一些传统组件的-compose-平替">六、一些传统组件的 Compose 平替</span></h2>
<h3><a href="#1-imageview" class="header-anchor">#</a><span id="1-imageview">1. ImageView</span></h3>
<p>传统的 <code>ImageView</code> 对应 <code>Compose</code> 的 <code>Image</code>。</p>
<p><code>Image</code> 最终调用的 <code>Android</code> 的 <code>Canvas.drawBitmap()、Canvas.drawColor()</code> 等最直接、省力的 <code>API</code>。</p>
<p>在 <code>Jetpack Compose</code> 里加载图片使用 <code>Image</code> 函数，它在大部分重载函数里有两个必传参数：<code>painter</code>、<code>contentDescription</code>。<br>
<code>contentDescription</code>， 是语义化描述，用于无障碍功能。</p>
<p><code>painter</code>，用于渲染图片，有如下三种方式可以获取 <code>painter</code> 对象：</p>
<p><strong>加载本地资源</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Image(</span><br><span class="line">    painter = painterResource(id = R.drawable.ic_launcher_foreground),</span><br><span class="line">    contentDescription = <span class="string">&quot;App Icon&quot;</span>,</span><br><span class="line">    modifier = Modifier.size(<span class="number">80.</span>dp),</span><br><span class="line">    contentScale = ContentScale.Crop</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>使用 painter 加载Bitmap</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">val</span> imageBItmap = bitmap.asImageBitmap()</span><br><span class="line">Image(</span><br><span class="line">    painter = BitmapPainter(imageBitmap),  </span><br><span class="line">    contentDescription = <span class="string">&quot;BitmapPainter 示例&quot;</span>,</span><br><span class="line">    modifier = Modifier.size(<span class="number">120.</span>dp),</span><br><span class="line">    contentScale = ContentScale.Fit </span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>网络图片</strong></p>
<p>加载网络图片需要引入三方库，<code>Glide</code>、<code>Coil</code> <em>(Coroutine Image Loader)</em> 都可。官方推荐 <code>Coil</code>，非面向 <code>View</code> 系统。</p>
<p><code>coil</code> 官网：<a target="_blank" rel="noopener" href="https://github.com/coil-kt/coil">https://github.com/coil-kt/coil</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Image(</span><br><span class="line">    painter = rememberAsyncImagePainter(<span class="string">&quot;https://picsum.photos/300/300&quot;</span>),</span><br><span class="line">    contentDescription = <span class="string">&quot;网络图片&quot;</span>,</span><br><span class="line">    modifier = Modifier.fillMaxWidth(),</span><br><span class="line">    contentScale = ContentScale.Crop</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3><a href="#2-textview" class="header-anchor">#</a><span id="2-textview">2. TextView</span></h3>
<p>传统的 <code>TextView</code> 对应 <code>Compose</code> 的 <code>Text</code>。</p>
<p><code>Text</code> 最终调用的 <code>Android</code> 的 <code>drawText()、drawTextRun()</code> 等 <code>API</code>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">TextExamples</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier.padding(<span class="number">16.</span>dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">// 基础用法</span></span><br><span class="line">        Text(text = <span class="string">&quot;你好，Compose Text&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义样式</span></span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">&quot;加粗/斜体/字号/颜色&quot;</span>,</span><br><span class="line">            fontSize = <span class="number">18.</span>sp,</span><br><span class="line">            fontWeight = FontWeight.SemiBold,</span><br><span class="line">            fontStyle = FontStyle.Italic,</span><br><span class="line">            color = Color(<span class="number">0xFF1565C0</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 溢出省略号</span></span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">&quot;这是一段很长很长很长的文字，用于演示单行溢出省略号效果……&quot;</span>,</span><br><span class="line">            maxLines = <span class="number">1</span>,</span><br><span class="line">            overflow = TextOverflow.Ellipsis</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 居中对齐</span></span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">&quot;居中对齐文本&quot;</span>,</span><br><span class="line">            modifier = Modifier.fillMaxWidth(),</span><br><span class="line">            textAlign = TextAlign.Center,</span><br><span class="line">            style = MaterialTheme.typography.titleMedium</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 行高与字间距</span></span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">&quot;行高与字间距示例\n第二行内容&quot;</span>,</span><br><span class="line">            lineHeight = <span class="number">24.</span>sp,</span><br><span class="line">            letterSpacing = <span class="number">0.5</span>.sp</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 下划线 / 删除线</span></span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">&quot;下划线与删除线&quot;</span>,</span><br><span class="line">            textDecoration = TextDecoration.Underline + TextDecoration.LineThrough</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 富文本（不同样式混排）</span></span><br><span class="line">        Text(</span><br><span class="line">            text = buildAnnotatedString &#123;</span><br><span class="line">                append(<span class="string">&quot;混合样式：&quot;</span>)</span><br><span class="line">                withStyle(SpanStyle(color = Color(<span class="number">0xFFD32F2F</span>), fontWeight = FontWeight.Bold)) &#123;</span><br><span class="line">                    append(<span class="string">&quot;红色加粗&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                append(<span class="string">&quot; 与 &quot;</span>)</span><br><span class="line">                withStyle(SpanStyle(color = Color(<span class="number">0xFF388E3C</span>), fontStyle = FontStyle.Italic)) &#123;</span><br><span class="line">                    append(<span class="string">&quot;绿色斜体&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><a href="#3-framelayout" class="header-anchor">#</a><span id="3-framelayout">3. FrameLayout</span></h3>
<p>对应 <strong><code>Box</code></strong>，用于一层层叠加的布局样式。下面是一个标题栏的示例。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Box &#123;</span><br><span class="line">    Image(</span><br><span class="line">        painter = painterResource(id = R.mipmap.icon_large),</span><br><span class="line">        contentDescription = <span class="string">&quot;底层图片&quot;</span></span><br><span class="line">    )</span><br><span class="line">    Text(</span><br><span class="line">        text = <span class="string">&quot;上层文字&quot;</span>,</span><br><span class="line">        fontSize = <span class="number">28.</span>sp,</span><br><span class="line">        color = color_333333,</span><br><span class="line">        textAlign = TextAlign.Center</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><a href="#4-linearlayout" class="header-anchor">#</a><span id="4-linearlayout">4. LinearLayout</span></h3>
<p>对应 <strong><code>Column()</code> 、<code>Row()</code></strong>，线性排列的布局样式。一个是从上到下排列，一个是从左到右排列。底层使用的同一套逻辑，使用同一个布局函数，上层进行了拆分，方便使用。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Column: 从上到下的线性排列</span></span><br><span class="line">Column(</span><br><span class="line">    modifier = Modifier</span><br><span class="line">        .fillMaxWidth()</span><br><span class="line">        .background(Color(<span class="number">0xFFF5F5F5</span>))</span><br><span class="line">        .padding(<span class="number">12.</span>dp),</span><br><span class="line">    verticalArrangement = Arrangement.spacedBy(<span class="number">8.</span>dp),</span><br><span class="line">    horizontalAlignment = Alignment.CenterHorizontally</span><br><span class="line">) &#123;</span><br><span class="line">    Image(</span><br><span class="line">        painter = painterResource(id = R.drawable.ic_launcher_foreground), </span><br><span class="line">        contentDescription = <span class="string">&quot;示例图片&quot;</span>,</span><br><span class="line">        modifier = Modifier.size(<span class="number">64.</span>dp),</span><br><span class="line">        contentScale = ContentScale.Crop</span><br><span class="line">    )</span><br><span class="line">    Text(<span class="string">&quot;这是图片下方的文字&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Row, 从左到右的线性排列。图片在左，文字在右</span></span><br><span class="line">Text(<span class="string">&quot;Row 示例&quot;</span>, style = MaterialTheme.typography.titleMedium)</span><br><span class="line">Row(</span><br><span class="line">    modifier = Modifier</span><br><span class="line">        .fillMaxWidth()</span><br><span class="line">        .background(Color(<span class="number">0xFFF5F5F5</span>))</span><br><span class="line">        .padding(<span class="number">12.</span>dp),</span><br><span class="line">    horizontalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp),</span><br><span class="line">    verticalAlignment = Alignment.CenterVertically</span><br><span class="line">) &#123;</span><br><span class="line">    Image(</span><br><span class="line">        painter = painterResource(id = R.drawable.ic_launcher_foreground), </span><br><span class="line">        contentDescription = <span class="string">&quot;示例图片&quot;</span>,</span><br><span class="line">        modifier = Modifier.size(<span class="number">48.</span>dp),</span><br><span class="line">        contentScale = ContentScale.Crop</span><br><span class="line">    )</span><br><span class="line">    Column(verticalArrangement = Arrangement.spacedBy(<span class="number">4.</span>dp)) &#123;</span><br><span class="line">        Text(<span class="string">&quot;主标题&quot;</span>)</span><br><span class="line">        Text(<span class="string">&quot;副标题/描述&quot;</span>, color = Color.Gray, fontSize = <span class="number">12.</span>sp)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><a href="#5-relativelayout" class="header-anchor">#</a><span id="5-relativelayout">5. RelativeLayout</span></h3>
<p>对应的还是 <code>Box</code>，但是可以使用 <code>Modifier</code> 控制位置。比如下面的标题栏的示例</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Box(</span><br><span class="line">    modifier = modifier</span><br><span class="line">        .fillMaxWidth()</span><br><span class="line">        .height(TitleBar_Height)</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="comment">// 在 Box 里居中</span></span><br><span class="line">    Text(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .align(Alignment.Center),</span><br><span class="line">        text = <span class="string">&quot;标题&quot;</span>,</span><br><span class="line">        fontWeight = LightBoldWeight,</span><br><span class="line">        fontSize = <span class="number">28.</span>sp,</span><br><span class="line">        color = color_333333,</span><br><span class="line">        textAlign = TextAlign.Center</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">// 在 Box 里上下居中，左右在左边</span></span><br><span class="line">    Image(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxHeight()</span><br><span class="line">            .padding(horizontal = <span class="number">24.</span>dp)</span><br><span class="line">            .align(Alignment.CenterStart)</span><br><span class="line">            .click &#123;</span><br><span class="line">                <span class="comment">// 点击处理</span></span><br><span class="line">            &#125;,</span><br><span class="line">        painter = painterResource(id = R.mipmap.icon_back),</span><br><span class="line">        contentDescription = <span class="string">&quot;返回按钮&quot;</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><a href="#6-constraintlayout" class="header-anchor">#</a><span id="6-constraintlayout">6. ConstraintLayout</span></h3>
<p>对应的是 <code>ConstraintLayout</code>，需要引入依赖 <code>androidx.constraintlayout:constraintlayout-compose:1.0.1</code></p>
<p><strong>官网：</strong> <a target="_blank" rel="noopener" href="https://developer.android.com/develop/ui/compose/layouts/constraintlayout?hl=zh-cn">https://developer.android.com/develop/ui/compose/layouts/constraintlayout?hl=zh-cn</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">ConstraintLayout(modifier = Modifier.fillMaxWidth()) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 先要创建 constaintLayout 认同的引用</span></span><br><span class="line">    <span class="keyword">val</span> (titleRef, imageRef) = createRefs()</span><br><span class="line">    <span class="comment">// 2. 设置组件水平、垂直链， 非必要</span></span><br><span class="line">    createHorizontalChain(titleRef, imageRef, chainStyle = ChainStyle.Packed)</span><br><span class="line"></span><br><span class="line">    Column(</span><br><span class="line">        Modifier</span><br><span class="line">        <span class="comment">// 3. 使用引用，作为某个组件的名称，并进行位置上的定位</span></span><br><span class="line">            .constrainAs(titleRef) &#123;</span><br><span class="line">                start.linkTo(parent.start)</span><br><span class="line">                end.linkTo(imageRef.start) <span class="comment">// 紧贴 Image</span></span><br><span class="line">                width = Dimension.fillToConstraints</span><br><span class="line">            &#125;</span><br><span class="line">    ) &#123;</span><br><span class="line">        Text(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .fillMaxWidth()</span><br><span class="line">                .align(Alignment.Start),</span><br><span class="line">            text = <span class="string">&quot;标题&quot;</span>,</span><br><span class="line">            maxLines = <span class="number">2</span>,</span><br><span class="line">            textAlign = TextAlign.Start,</span><br><span class="line">            overflow = TextOverflow.Ellipsis</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        Spacer(modifier = Modifier.height(<span class="number">4.</span>dp))</span><br><span class="line">        <span class="comment">// 时间</span></span><br><span class="line">            Text(</span><br><span class="line">                modifier = Modifier.align(Alignment.Start),</span><br><span class="line">                text = ”时间“,</span><br><span class="line">                maxLines = <span class="number">1</span>,</span><br><span class="line">                overflow = TextOverflow.Ellipsis</span><br><span class="line">            )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Image(modifier = Modifier</span><br><span class="line">        .constrainAs(imageRef) &#123;</span><br><span class="line">            end.linkTo(parent.end) <span class="comment">// 紧贴父容器右边</span></span><br><span class="line">            start.linkTo(titleRef.end)</span><br><span class="line">            top.linkTo(titleRef.top)</span><br><span class="line">            bottom.linkTo(titleRef.bottom)</span><br><span class="line">        &#125;</span><br><span class="line">        .padding(<span class="number">12.</span>dp), painter = painterResource(id = R.mipmap.icon_arrow), contentDescription = <span class="string">&quot;返回按钮&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><a href="#7-scrollview" class="header-anchor">#</a><span id="7-scrollview">7. ScrollView</span></h3>
<p>可滑动、滚动的组件。可以在任意布局函数上添加一个 <code>Modifier</code> 的扩展函数 <code>Modifier.verticalScroll()</code>、<code>Modifier.horizontalScroll()</code>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">SimpleVerticalScroll</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .height(<span class="number">180.</span>dp)</span><br><span class="line">            .fillMaxWidth()</span><br><span class="line">            .verticalScroll(rememberScrollState()) <span class="comment">// 直接内联 state</span></span><br><span class="line">            .padding(<span class="number">12.</span>dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">8.</span>dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        repeat(<span class="number">30</span>) &#123; i -&gt;</span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .fillMaxWidth()</span><br><span class="line">                    .height(<span class="number">36.</span>dp)</span><br><span class="line">                    .background(<span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) Color(<span class="number">0xFFF3F6FF</span>) <span class="keyword">else</span> Color(<span class="number">0xFFF8F9FB</span>)),</span><br><span class="line">                contentAlignment = Alignment.CenterStart</span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(<span class="string">&quot;竖向项 #<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>&quot;</span>, modifier = Modifier.padding(horizontal = <span class="number">8.</span>dp))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">SimpleHorizontalScroll</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Row(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxWidth()</span><br><span class="line">            .height(<span class="number">80.</span>dp)</span><br><span class="line">            .horizontalScroll(rememberScrollState()) <span class="comment">// 直接内联 state</span></span><br><span class="line">            .padding(<span class="number">12.</span>dp),</span><br><span class="line">        horizontalArrangement = Arrangement.spacedBy(<span class="number">8.</span>dp),</span><br><span class="line">        verticalAlignment = Alignment.CenterVertically</span><br><span class="line">    ) &#123;</span><br><span class="line">        repeat(<span class="number">20</span>) &#123; i -&gt;</span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .width(<span class="number">100.</span>dp)</span><br><span class="line">                    .fillMaxHeight()</span><br><span class="line">                    .background(<span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) Color(<span class="number">0xFFDFF5E6</span>) <span class="keyword">else</span> Color(<span class="number">0xFFE8F7FF</span>)),</span><br><span class="line">                contentAlignment = Alignment.Center</span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(<span class="string">&quot;卡片 #<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><a href="#8-recyclerview" class="header-anchor">#</a><span id="8-recyclerview">8. RecyclerView</span></h3>
<p>对应 <code>LazyColumn()</code>、<code>LazyRow()</code>、<code>LazyGrid</code> 等。不需要 <code>Adapter</code> 、<code>ViewHolder</code>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 垂直方向的惰性列表（仅渲染可见项），适合长列表场景。</span></span><br><span class="line"><span class="comment"> * 关键点：</span></span><br><span class="line"><span class="comment"> * - contentPadding：内容整体内边距</span></span><br><span class="line"><span class="comment"> * - verticalArrangement：每个 item 之间的垂直间距</span></span><br><span class="line"><span class="comment"> * - items(...)：按数据源逐项渲染；item &#123; ... &#125; 可插入头/尾等单个内容</span></span><br><span class="line"><span class="comment"> * - 建议提供 key 提升复用效率（如 id 或唯一字符串）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">LazyColumnDemo</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 模拟数据源（真实项目中可来自 ViewModel）</span></span><br><span class="line">    <span class="keyword">val</span> <span class="keyword">data</span> = (<span class="number">1.</span><span class="number">.20</span>).map &#123; <span class="string">&quot;列表项 <span class="variable">$it</span>&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line">    LazyColumn(</span><br><span class="line">        modifier = Modifier.fillMaxWidth(),</span><br><span class="line">        contentPadding = PaddingValues(<span class="number">16.</span>dp),               <span class="comment">// 列表整体上下左右的内边距</span></span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">8.</span>dp)     <span class="comment">// 每个 item 之间的垂直间距</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">// 头部（可选）</span></span><br><span class="line">        item &#123;</span><br><span class="line">            Text(</span><br><span class="line">                text = <span class="string">&quot;— Header —&quot;</span>,</span><br><span class="line">                color = Color.Gray,</span><br><span class="line">                fontSize = <span class="number">12.</span>sp,</span><br><span class="line">                modifier = Modifier.padding(bottom = <span class="number">8.</span>dp)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用 items 渲染数据；建议提供 key，避免位置变动导致重组开销</span></span><br><span class="line">        items(</span><br><span class="line">            items = <span class="keyword">data</span>,</span><br><span class="line">            key = &#123; it &#125; <span class="comment">// 这里用字符串本身作为 key；真实项目用稳定 id</span></span><br><span class="line">        ) &#123; item -&gt;</span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .fillMaxWidth()                          <span class="comment">// 宽度占满父级</span></span><br><span class="line">                    .height(<span class="number">48.</span>dp)                           <span class="comment">// 固定高度，利于复用与测量</span></span><br><span class="line">                    .background(Color(<span class="number">0xFFEFEFEF</span>)),</span><br><span class="line">                contentAlignment = Alignment.CenterStart</span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(</span><br><span class="line">                    text = item,</span><br><span class="line">                    fontSize = <span class="number">16.</span>sp,</span><br><span class="line">                    modifier = Modifier.padding(horizontal = <span class="number">12.</span>dp)</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 底部（可选）</span></span><br><span class="line">        item &#123;</span><br><span class="line">            Text(</span><br><span class="line">                text = <span class="string">&quot;— Footer —&quot;</span>,</span><br><span class="line">                color = Color.Gray,</span><br><span class="line">                fontSize = <span class="number">12.</span>sp,</span><br><span class="line">                modifier = Modifier.padding(top = <span class="number">8.</span>dp)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 水平方向的惰性列表，常用于横向卡片滑动。</span></span><br><span class="line"><span class="comment"> * 关键点：</span></span><br><span class="line"><span class="comment"> * - contentPadding：左右与上下的内边距</span></span><br><span class="line"><span class="comment"> * - horizontalArrangement：每个 item 的水平间距</span></span><br><span class="line"><span class="comment"> * - 固定 item 尺寸有利于性能与布局稳定</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">LazyRowDemo</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> <span class="keyword">data</span> = (<span class="number">1.</span><span class="number">.20</span>).map &#123; <span class="string">&quot;卡片 <span class="variable">$it</span>&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line">    LazyRow(</span><br><span class="line">        modifier = Modifier.fillMaxWidth(),</span><br><span class="line">        contentPadding = PaddingValues(horizontal = <span class="number">16.</span>dp, vertical = <span class="number">8.</span>dp),</span><br><span class="line">        horizontalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp)  <span class="comment">// item 之间水平间距</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        items(</span><br><span class="line">            items = <span class="keyword">data</span>,</span><br><span class="line">            key = &#123; it &#125;</span><br><span class="line">        ) &#123; item -&gt;</span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .size(width = <span class="number">120.</span>dp, height = <span class="number">72.</span>dp)   <span class="comment">// 固定卡片大小</span></span><br><span class="line">                    .background(Color(<span class="number">0xFFDDEBFF</span>)),</span><br><span class="line">                contentAlignment = Alignment.Center</span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(text = item)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 垂直方向的网格列表（惰性），适合宫格展示。</span></span><br><span class="line"><span class="comment"> * 关键点：</span></span><br><span class="line"><span class="comment"> * - columns：</span></span><br><span class="line"><span class="comment"> *   - GridCells.Fixed(列数)：固定列数</span></span><br><span class="line"><span class="comment"> *   - GridCells.Adaptive(minSize)：自适应列数（列宽不小于 minSize）</span></span><br><span class="line"><span class="comment"> * - aspectRatio(1f)：保持方形卡片</span></span><br><span class="line"><span class="comment"> * - 为网格提供间距：verticalArrangement / horizontalArrangement</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">LazyVerticalGridDemo</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> <span class="keyword">data</span> = (<span class="number">1.</span><span class="number">.20</span>).map &#123; <span class="string">&quot;网格 <span class="variable">$it</span>&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line">    LazyVerticalGrid(</span><br><span class="line">        columns = GridCells.Fixed(<span class="number">2</span>),                         <span class="comment">// 固定 2 列；也可用 GridCells.Adaptive(140.dp)</span></span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxWidth()</span><br><span class="line">            .height(<span class="number">360.</span>dp),                                  <span class="comment">// 指定可见高度，方便预览</span></span><br><span class="line">        contentPadding = PaddingValues(<span class="number">16.</span>dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp),    <span class="comment">// 行间距</span></span><br><span class="line">        horizontalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp)   <span class="comment">// 列间距</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        items(</span><br><span class="line">            items = <span class="keyword">data</span>,</span><br><span class="line">            key = &#123; it &#125;</span><br><span class="line">        ) &#123; item -&gt;</span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .aspectRatio(<span class="number">1f</span>)                          <span class="comment">// 正方形卡片</span></span><br><span class="line">                    .background(Color(<span class="number">0xFFFFF0D5</span>)),</span><br><span class="line">                contentAlignment = Alignment.Center</span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(text = item)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><a href="#9-button" class="header-anchor">#</a><span id="9-button">9. Button</span></h3>
<p>对应 <code>Button</code> 函数，但是 <code>Jetpack Compose</code> 里的 <code>Button</code> 只有点击范围，具体的点击的内容，比如说文本，还需要再添加 <code>Text</code> 去填充。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ButtonExamples</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier.padding(<span class="number">16.</span>dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">// 基础按钮</span></span><br><span class="line">        Button(onClick = &#123; <span class="comment">/* TODO */</span> &#125;) &#123;</span><br><span class="line">            Text(<span class="string">&quot;Button&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 带图标按钮</span></span><br><span class="line">        Button(onClick = &#123; <span class="comment">/* TODO */</span> &#125;) &#123;</span><br><span class="line">            Icon(Icons.Filled.Favorite, contentDescription = <span class="literal">null</span>)</span><br><span class="line">            Spacer(Modifier.width(<span class="number">8.</span>dp))</span><br><span class="line">            Text(<span class="string">&quot;Icon Button&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 不同变体</span></span><br><span class="line">        ElevatedButton(onClick = &#123; <span class="comment">/* TODO */</span> &#125;) &#123; Text(<span class="string">&quot;ElevatedButton&quot;</span>) &#125;</span><br><span class="line">        OutlinedButton(onClick = &#123; <span class="comment">/* TODO */</span> &#125;) &#123; Text(<span class="string">&quot;OutlinedButton&quot;</span>) &#125;</span><br><span class="line">        TextButton(onClick = &#123; <span class="comment">/* TODO */</span> &#125;) &#123; Text(<span class="string">&quot;TextButton&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 禁用</span></span><br><span class="line">        Button(onClick = &#123; <span class="comment">/* TODO */</span> &#125;, enabled = <span class="literal">false</span>) &#123;</span><br><span class="line">            Text(<span class="string">&quot;Disabled&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义颜色与圆角、充满宽度</span></span><br><span class="line">        Button(</span><br><span class="line">            onClick = &#123; <span class="comment">/* TODO */</span> &#125;,</span><br><span class="line">            modifier = Modifier.fillMaxWidth(),</span><br><span class="line">            colors = ButtonDefaults.buttonColors(</span><br><span class="line">                containerColor = Color(<span class="number">0xFF6366F1</span>),</span><br><span class="line">                contentColor = Color.White</span><br><span class="line">            ),</span><br><span class="line">            shape = MaterialTheme.shapes.medium</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;Submit&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，<code>Button</code> 也是使用了 <code>Material3</code> 设计规范，有自己的点击效果和内间距。</p>
<h2><a href="#七-modifier-经典方法" class="header-anchor">#</a><span id="七-modifier-经典方法">七、Modifier 经典方法</span></h2>
<h3><a href="#1-内外边距" class="header-anchor">#</a><span id="1-内外边距">1. 内外边距</span></h3>
<p>在 <code>Android</code> 传统 <code>View</code> 里，使用  <code>margin</code> 设置外边距，使用 <code>padding</code> 设置内间距。但是 <code>Jetpack Compose</code> 里有只有 <code>padding</code>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ModifierOrderDemo</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxWidth()</span><br><span class="line">            .padding(<span class="number">16.</span>dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">16.</span>dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">// 一个灰色容器，方便观察内层红色背景与 padding 的关系</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .fillMaxWidth()</span><br><span class="line">                .background(Color(<span class="number">0xFFEFEFEF</span>))</span><br><span class="line">                .padding(<span class="number">12.</span>dp)</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="comment">// 情况 1：background 再 padding</span></span><br><span class="line">            <span class="comment">// 含义：红色背景绘制在“padding 之前”的区域上；padding 产生的空白区域不会被红色填充</span></span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .background(Color.Red)</span><br><span class="line">                    .padding(<span class="number">16.</span>dp) <span class="comment">// 这层 padding 在背景“外面”，因此 padding 区域显示为灰色容器色</span></span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(</span><br><span class="line">                    text = <span class="string">&quot;background -&gt; padding（红色不含四周 padding）&quot;</span>,</span><br><span class="line">                    color = Color.White,</span><br><span class="line">                    modifier = Modifier.align(Alignment.CenterStart)</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .fillMaxWidth()</span><br><span class="line">                .background(Color(<span class="number">0xFFEFEFEF</span>))</span><br><span class="line">                .padding(<span class="number">12.</span>dp)</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="comment">// 情况 2：padding 再 background</span></span><br><span class="line">            <span class="comment">// 含义：先腾出 padding 空间，再整体铺红色背景；红色将包含 padding 区域一起显示</span></span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .padding(<span class="number">16.</span>dp)</span><br><span class="line">                    .background(Color.Red) <span class="comment">// 背景在最外层，覆盖到 padding 区域</span></span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(</span><br><span class="line">                    text = <span class="string">&quot;padding -&gt; background（红色包含四周 padding）&quot;</span>,</span><br><span class="line">                    color = Color.White,</span><br><span class="line">                    modifier = Modifier.align(Alignment.CenterStart)</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 小结：</span></span><br><span class="line">        <span class="comment">// - background -&gt; padding：背景在内、padding 在外，padding 区域不被背景覆盖</span></span><br><span class="line">        <span class="comment">// - padding -&gt; background：padding 在内、背景在外，背景覆盖包含 padding 区域</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong></p>
<ol>
<li>
<p>可以使用 <code>padding</code> 来达到内间距、外间距的效果，只需调整调用顺序即可。</p>
</li>
<li>
<p><code>padding</code> 可以理解为就是<strong>此时</strong> <code>View</code> 的内间距，而 <code>background</code> 绘制<strong>此时</strong> <code>View</code> 的背景色。 如此</p>
<ul>
<li>先设置 <code>padding</code>，再设置 <code>background</code>，就是设置的 <code>View</code> 的内间距</li>
<li>先设置 <code>background</code>，再设置 <code>padding</code>，就是设置了 <code>View</code> 的外间距</li>
</ul>
</li>
<li>
<p>使用 <code>padding</code>时，一定要注意 <code>size</code>、<code>width</code> 、<code>height</code> 等方法， <code>padding</code> 包含在尺寸里。</p>
</li>
</ol>
<h3><a href="#2-size-width-height" class="header-anchor">#</a><span id="2-size-width-height">2. size、width、height</span></h3>
<p>使用 <code>size</code> 、<code>width</code>、<code>height</code> 来划定 <code>View</code> 的大小。注意，不添加尺寸方法时，默认值相当于传统 <code>View</code> 系统里的 <code>wrap_content</code></p>
<table>
<thead>
<tr>
<th>传统 View（XML/视图）</th>
<th>含义</th>
<th>Compose 对应写法</th>
<th>备注/示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>match_parent</code>（宽）</td>
<td>宽度占满父容器</td>
<td><code>Modifier.fillMaxWidth()</code></td>
<td>例：<code>Modifier.fillMaxWidth()</code></td>
</tr>
<tr>
<td><code>match_parent</code>（高）</td>
<td>高度占满父容器</td>
<td><code>Modifier.fillMaxHeight()</code></td>
<td>例：<code>Modifier.fillMaxHeight()</code></td>
</tr>
<tr>
<td><code>match_parent</code>（宽高）</td>
<td>宽高都占满父容器</td>
<td><code>Modifier.fillMaxSize()</code></td>
<td>例：<code>Modifier.fillMaxSize()</code></td>
</tr>
<tr>
<td><code>wrap_content</code>（默认）</td>
<td>按内容测量大小</td>
<td>不加尺寸修饰符 / <code>wrapContentSize()</code></td>
<td>Compose 默认即“包裹内容”</td>
</tr>
<tr>
<td><code>wrap_content</code>（仅宽）</td>
<td>宽按内容，高不变</td>
<td><code>Modifier.wrapContentWidth()</code></td>
<td>亦有 <code>wrapContentHeight()</code>、<code>wrapContentSize()</code></td>
</tr>
<tr>
<td>指定定值（dp）</td>
<td>固定尺寸</td>
<td><code>Modifier.width(XX.dp)</code> / <code>height(XX.dp)</code> / <code>size(XX.dp)</code></td>
<td>例：<code>Modifier.size(48.dp)</code></td>
</tr>
<tr>
<td>最小/最大尺寸</td>
<td>约束尺寸范围</td>
<td><code>Modifier.sizeIn(minWidth=..., maxHeight=...)</code></td>
<td>例：<code>Modifier.sizeIn(minWidth=80.dp)</code></td>
</tr>
<tr>
<td>必须尺寸</td>
<td>强制为指定值</td>
<td><code>Modifier.requiredWidth(...)</code> / <code>requiredHeight(...)</code> / <code>requiredSize(...)</code></td>
<td>忽略父约束的进一步缩小</td>
</tr>
<tr>
<td><code>LinearLayout</code> + <code>weight</code></td>
<td>按权重分配剩余空间</td>
<td><code>Modifier.weight(1f, fill = true)</code></td>
<td><code>Row/Column</code> 子项使用；<code>fill=false</code> 仅占内容</td>
</tr>
<tr>
<td><code>ConstraintLayout</code> 的 match_constraint（0dp）</td>
<td>依约束拉伸填充</td>
<td>Compose ConstraintLayout：<code>Dimension.fillToConstraints</code></td>
<td>需使用 Compose ConstraintLayout DSL</td>
</tr>
<tr>
<td>外边距 <code>margin</code></td>
<td>与父/兄弟间距</td>
<td>父容器 <code>padding</code> 或 <code>Spacer</code></td>
<td>例：父 <code>padding(16.dp)</code>；或 <code>Spacer(Modifier.width(8.dp))</code></td>
</tr>
<tr>
<td>内边距 <code>padding</code></td>
<td>内容与边界内距</td>
<td><code>Modifier.padding(...)</code></td>
<td>与 <code>background/clip</code> 顺序相关</td>
</tr>
</tbody>
</table>
<h3><a href="#3-background-与-clip" class="header-anchor">#</a><span id="3-background-与-clip">3. background 与 clip</span></h3>
<p><code>background</code> 方法，可以设置背景色，包括纯色和渐变色，还可以设置背景的形状，一般使用圆角矩形。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">BackgroundExamples</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxWidth()</span><br><span class="line">            .padding(<span class="number">16.</span>dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">// 1) 纯色背景</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .fillMaxWidth()</span><br><span class="line">                .height(<span class="number">64.</span>dp)</span><br><span class="line">                .background(Color(<span class="number">0xFF2196F3</span>)),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;纯色背景&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2) 渐变色背景（线性）</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .fillMaxWidth()</span><br><span class="line">                .height(<span class="number">64.</span>dp)</span><br><span class="line">                .background(</span><br><span class="line">                    brush = Brush.linearGradient(</span><br><span class="line">                        colors = listOf(Color(<span class="number">0xFF42A5F5</span>), Color(<span class="number">0xFF7E57C2</span>))</span><br><span class="line">                    )</span><br><span class="line">                ),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;线性渐变背景&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3) 圆角矩形背景（纯色 + 圆角）</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .fillMaxWidth()</span><br><span class="line">                .height(<span class="number">64.</span>dp)</span><br><span class="line">                .background(</span><br><span class="line">                    color = Color(<span class="number">0xFF66BB6A</span>),</span><br><span class="line">                    shape = RoundedCornerShape(<span class="number">12.</span>dp)</span><br><span class="line">                )</span><br><span class="line">                .padding(<span class="number">12.</span>dp), <span class="comment">// 便于观察圆角</span></span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;圆角矩形背景&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>clip</code> 方法，顾名思义，就是对 <code>View</code> 进行裁剪，它有只有个参数：<code>shape</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ClipExamples</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxWidth()</span><br><span class="line">            .padding(<span class="number">16.</span>dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">16.</span>dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">// 1) 圆形裁剪（常用于头像）</span></span><br><span class="line">        Row(</span><br><span class="line">            verticalAlignment = Alignment.CenterVertically,</span><br><span class="line">            horizontalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp)</span><br><span class="line">        ) &#123;</span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .size(<span class="number">72.</span>dp)</span><br><span class="line">                    .clip(CircleShape)                         <span class="comment">// 内容被裁成圆形</span></span><br><span class="line">                    .background(Color(<span class="number">0xFFE3F2FD</span>))</span><br><span class="line">                    .border(<span class="number">2.</span>dp, Color(<span class="number">0xFF2196F3</span>), CircleShape),</span><br><span class="line">                contentAlignment = Alignment.Center</span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如需图片裁剪为圆形</span></span><br><span class="line">            <span class="comment">// 将 R.drawable.sample 替换为你的图片资源</span></span><br><span class="line">            Image(</span><br><span class="line">                painter = painterResource(id = R.drawable.ic_launcher_foreground),</span><br><span class="line">                contentDescription = <span class="literal">null</span>,</span><br><span class="line">                contentScale = ContentScale.Crop,</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .size(<span class="number">72.</span>dp)</span><br><span class="line">                    .clip(CircleShape)</span><br><span class="line">                    .border(<span class="number">2.</span>dp, Color.White, CircleShape)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2) 圆角矩形裁剪（与 background 顺序对比）</span></span><br><span class="line">        Row(</span><br><span class="line">            horizontalArrangement = Arrangement.spacedBy(<span class="number">12.</span>dp)</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="comment">// 2.1 先 clip 再 background：背景和内容都会被裁圆角</span></span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .size(<span class="number">120.</span>dp, <span class="number">64.</span>dp)</span><br><span class="line">                    .clip(RoundedCornerShape(<span class="number">12.</span>dp))</span><br><span class="line">                    .background(Color(<span class="number">0xFF66BB6A</span>)),</span><br><span class="line">                contentAlignment = Alignment.Center</span><br><span class="line">            ) &#123; Text(<span class="string">&quot;clip -&gt; bg&quot;</span>, color = Color.White) &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.2 仅圆角背景，不裁剪内容（比如内层溢出仍可能方形）</span></span><br><span class="line">            Box(</span><br><span class="line">                modifier = Modifier</span><br><span class="line">                    .size(<span class="number">120.</span>dp, <span class="number">64.</span>dp)</span><br><span class="line">                    .background(Color(<span class="number">0xFF66BB6A</span>), shape = RoundedCornerShape(<span class="number">12.</span>dp)),</span><br><span class="line">                contentAlignment = Alignment.Center</span><br><span class="line">            ) &#123; Text(<span class="string">&quot;bg(shape)&quot;</span>, color = Color.White) &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3) 斜切角（CutCornerShape）</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">160.</span>dp, <span class="number">64.</span>dp)</span><br><span class="line">                .clip(CutCornerShape(topStart = <span class="number">16.</span>dp, bottomEnd = <span class="number">16.</span>dp))</span><br><span class="line">                .background(Color(<span class="number">0xFFFFA726</span>)),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;CutCornerShape&quot;</span>, color = Color.White)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4) 自定义形状（GenericShape：三角形）</span></span><br><span class="line">        <span class="keyword">val</span> TriangleShape = GenericShape &#123; size, _ -&gt;</span><br><span class="line">            moveTo(<span class="number">0f</span>, size.height)</span><br><span class="line">            lineTo(size.width / <span class="number">2f</span>, <span class="number">0f</span>)</span><br><span class="line">            lineTo(size.width, size.height)</span><br><span class="line">            close()</span><br><span class="line">        &#125;</span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">120.</span>dp)</span><br><span class="line">                .clip(TriangleShape)</span><br><span class="line">                .background(Color(<span class="number">0xFF7E57C2</span>)),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;Triangle&quot;</span>, color = Color.White)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong></p>
<ul>
<li>想让“背景与内容都被裁剪”：先 <code>clip(shape)</code> 再 <code>background(...)</code>。</li>
<li>只想要圆角背景但不裁剪内容：用 <code>background(color, shape=...)</code> 即可。</li>
<li>常见形状：<code>CircleShape</code>、<code>RoundedCornerShape</code>、<code>CutCornerShape</code>，复杂形状用 <code>GenericShape</code>。</li>
</ul>
<h3><a href="#4-click-监听" class="header-anchor">#</a><span id="4-click-监听">4. click 监听</span></h3>
<p>与传统 <code>View</code> 体系的点击监听设置不同，要给 <code>View</code> 对象设置监听器。 <code>@Compose</code>函数是没有返回结果的，也就不存在能够进行设置的句柄。</p>
<p>一般组件的点击，使用 <code>Modifier.clickable&#123;&#125;</code> 方法，<code>Button</code> 组件的点击监听，使用组件自身的函数入参</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// padding 对 click 的影响</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ClickAreaOrderDemo</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxWidth()</span><br><span class="line">            .padding(<span class="number">16.</span>dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">16.</span>dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">// 场景 A：padding → background → padding → clickable</span></span><br><span class="line">        <span class="comment">// 结论：命中区 = 内容 + 两层 padding（最大）</span></span><br><span class="line">        <span class="comment">// 说明：background 仅绘制，不改变命中区大小；clickable 之后不再扩大命中区</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .padding(<span class="number">30.</span>dp)                 <span class="comment">// 扩大外层尺寸 → 计入命中</span></span><br><span class="line">                .background(Color(<span class="number">0xFFFFEBEE</span>))  <span class="comment">// 仅绘制 → 不影响命中大小</span></span><br><span class="line">                .padding(<span class="number">8.</span>dp)                  <span class="comment">// 再次扩大尺寸 → 计入命中</span></span><br><span class="line">                .clickable &#123; <span class="comment">/* 点击触发 */</span> &#125;,</span><br><span class="line">            contentAlignment = Alignment.CenterStart</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;A: 命中包含两层 padding&quot;</span>, modifier = Modifier.padding(<span class="number">4.</span>dp))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 场景 B：padding → clickable → background → padding</span></span><br><span class="line">        <span class="comment">// 结论：命中区 = 内容 + 第一层 padding</span></span><br><span class="line">        <span class="comment">// 说明：clickable 之后的 padding 仅视觉留白，不计入命中；background 仅绘制</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .padding(<span class="number">30.</span>dp)                 <span class="comment">// 计入命中</span></span><br><span class="line">                .clickable &#123; <span class="comment">/* 点击触发 */</span> &#125;   <span class="comment">// 命中范围在此确定</span></span><br><span class="line">                .background(Color(<span class="number">0xFFE3F2FD</span>))  <span class="comment">// 仅绘制 → 不影响命中大小</span></span><br><span class="line">                .padding(<span class="number">8.</span>dp),                 <span class="comment">// 不计入命中（仅视觉留白）</span></span><br><span class="line">            contentAlignment = Alignment.CenterStart</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;B: 命中仅包含第一层 padding&quot;</span>, modifier = Modifier.padding(<span class="number">4.</span>dp))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 场景 C：size → padding → background → padding → clickable</span></span><br><span class="line">        <span class="comment">// 结论：命中区 = 固定尺寸 + 两层 padding</span></span><br><span class="line">        <span class="comment">// 说明：两次 padding 都在 clickable 之前，均会扩大命中区；background 仅绘制</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">80.</span>dp)                    <span class="comment">// 基础固定尺寸 → 计入命中</span></span><br><span class="line">                .padding(<span class="number">20.</span>dp)                 <span class="comment">// 扩大尺寸 → 计入命中</span></span><br><span class="line">                .background(Color(<span class="number">0xFFE8F5E9</span>))  <span class="comment">// 仅绘制 → 不影响命中大小</span></span><br><span class="line">                .padding(<span class="number">8.</span>dp)                  <span class="comment">// 再扩大尺寸 → 计入命中</span></span><br><span class="line">                .clickable &#123; <span class="comment">/* 点击触发 */</span> &#125;,</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;C: 命中为 80dp + 20dp + 8dp&quot;</span>, modifier = Modifier.padding(<span class="number">4.</span>dp))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 场景 D：size → padding → clickable</span></span><br><span class="line">        <span class="comment">// 结论：命中区 = 固定尺寸 + padding</span></span><br><span class="line">        <span class="comment">// 说明：clickable 之前的 padding 会扩大命中区</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">80.</span>dp)                    <span class="comment">// 基础固定尺寸 → 计入命中</span></span><br><span class="line">                .padding(<span class="number">20.</span>dp)                 <span class="comment">// 扩大尺寸 → 计入命中</span></span><br><span class="line">                .clickable &#123; <span class="comment">/* 点击触发 */</span> &#125;,</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;D: 命中为 80dp + 20dp&quot;</span>, modifier = Modifier.padding(<span class="number">4.</span>dp))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 场景 E：size → clickable → padding</span></span><br><span class="line">        <span class="comment">// 结论：命中区 = 固定尺寸（不包含 padding）</span></span><br><span class="line">        <span class="comment">// 说明：clickable 之后的 padding 仅视觉留白，不计入命中</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">80.</span>dp)                    <span class="comment">// 固定命中尺寸</span></span><br><span class="line">                .clickable &#123; <span class="comment">/* 点击触发 */</span> &#125;   <span class="comment">// 命中范围在此锁定</span></span><br><span class="line">                .padding(<span class="number">20.</span>dp),                <span class="comment">// 不计入命中（仅视觉留白）</span></span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;E: 命中为 80dp，不含 padding&quot;</span>, modifier = Modifier.padding(<span class="number">4.</span>dp))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 场景 F：clickable → padding</span></span><br><span class="line">        <span class="comment">// 结论：命中区 = 内容本体（不包含 padding）</span></span><br><span class="line">        <span class="comment">// 说明：padding 位于 clickable 之后，仅产生视觉留白</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .clickable &#123; <span class="comment">/* 点击触发 */</span> &#125;   <span class="comment">// 命中范围在此确定</span></span><br><span class="line">                .padding(<span class="number">20.</span>dp),                <span class="comment">// 不计入命中（仅视觉留白）</span></span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;F: 命中为内容本体，不含 padding&quot;</span>, modifier = Modifier.padding(<span class="number">4.</span>dp))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 场景 G：padding → clickable</span></span><br><span class="line">        <span class="comment">// 结论：命中区 = 内容 + padding</span></span><br><span class="line">        <span class="comment">// 说明：clickable 之前的 padding 会扩大命中区</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .padding(<span class="number">20.</span>dp)                 <span class="comment">// 扩大尺寸 → 计入命中</span></span><br><span class="line">                .clickable &#123; <span class="comment">/* 点击触发 */</span> &#125;,</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(<span class="string">&quot;G: 命中包含 padding&quot;</span>, modifier = Modifier.padding(<span class="number">4.</span>dp))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong></p>
<ul>
<li>
<p><code>clickable</code> 函数应用了 <code>Material3</code> 的设计风格，点击会有水波纹效果。</p>
</li>
<li>
<p><code>clickable</code> 与 <code>padding / background / size</code> 关系表</p>
<table>
<thead>
<tr>
<th>写法（同一条 Modifier 链）</th>
<th>命中区是否扩大</th>
<th>命中包含哪些</th>
<th>视觉表现 / 备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>padding → clickable</code></td>
<td>✅ 是</td>
<td>内容 + padding</td>
<td>常用来<strong>增大触点区域</strong>（推荐做法，比如小图标）</td>
</tr>
<tr>
<td><code>clickable → padding</code></td>
<td>❌ 否</td>
<td>仅内容（不含 padding）</td>
<td>padding 只会把内容往里缩，看起来像有空隙但<strong>点不到空隙</strong></td>
</tr>
<tr>
<td><code>padding → background → padding → clickable</code></td>
<td>✅ 是</td>
<td>包含两层 padding</td>
<td>background 只影响绘制，不改变大小，命中区仍然按外层 padding 扩大</td>
</tr>
<tr>
<td><code>padding → clickable → background → padding</code></td>
<td>✅ 是</td>
<td>仅第一层 padding</td>
<td>clickable 锁定了命中区，之后的 padding 只是<strong>视觉留白</strong></td>
</tr>
<tr>
<td><code>size / width / height / fillMax* → clickable</code></td>
<td>✅ 是</td>
<td>按指定尺寸（固定/拉伸后）</td>
<td>点击范围被“定死”为指定尺寸，即使内容更小</td>
</tr>
<tr>
<td><code>clickable → size / width / height / fillMax*</code></td>
<td>❌ 否</td>
<td>仍是原始内容大小</td>
<td>外层视觉变大但<strong>不可点</strong>，容易出现“背景比触点大”的错觉</td>
</tr>
<tr>
<td>父容器上的 <code>padding</code>（子项 clickable）</td>
<td>❌ 否</td>
<td>不包含父容器的 padding</td>
<td>父容器的 padding 相当于 <strong>外边距</strong>，对子项的点击无效</td>
</tr>
<tr>
<td><code>offset → clickable</code></td>
<td>❌ 否</td>
<td>仅内容，位置平移</td>
<td>点击范围随 offset 移动</td>
</tr>
<tr>
<td><code>clickable → offset</code></td>
<td>❌ 否</td>
<td>仅内容，位置平移</td>
<td>一样，offset 不会改变大小，只改变命中区位置</td>
</tr>
</tbody>
</table>
<p>关系总结</p>
<ul>
<li><strong><code>padding</code> 在前 → 点击范围扩大</strong>（常用来放大触点）。</li>
<li><strong><code>padding</code> 在后 → 只影响内容布局</strong>（不会扩大命中范围）。</li>
<li><strong><code>size</code> 在前 → 点击范围按指定大小</strong>。</li>
<li><strong><code>size</code> 在后 → 只是视觉效果，点击不变</strong>。</li>
<li><strong><code>background</code> 永远不影响命中区</strong>，它只是画出来。</li>
</ul>
</li>
</ul>
<h3><a href="#5-modifier-总结" class="header-anchor">#</a><span id="5-modifier-总结">5. Modifier 总结</span></h3>
<ul>
<li><code>Modifier</code> 可以被传递给几乎任何一个 <code>@Compose</code>函数里。</li>
<li><code>Modifier</code> 的 <strong>调用顺序是敏感的</strong>，相同方法，不同调用顺序会导致不同的结果。</li>
<li><code>Modifier</code> 对同一个函数多次调用，会依次执行。</li>
<li><code>Modifier</code> 的方法都是 <strong>对调用方法时的组件</strong> 进行方法的应用。</li>
<li>所有 <code>Modifier</code> 的调用的方法，其实都是返回 <code>Modifier</code> 类型的 <code>Modifier</code> 的扩展函数。</li>
<li>通用的设置使用 <code>Modifier</code>，专项的设置用函数参数。比如，文本的颜色、字号大小等 <code>Text</code> 专属设置，可以直接通过 <code>Text</code>函数的入参进行设置，而背景色，间距等通用的，则需要 <code>Modifier</code>。</li>
</ul>
</p></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2025-08-23</span><i class="fa fa-tag"></i><a class="tag" href="/tags/Android/" title="Android">Android </a><i class="fa fa-tag"></i><a class="tag" href="/tags/Jetpack-Compose/" title="Jetpack Compose">Jetpack Compose </a><i class="fa fa-tag"></i><a class="tag" href="/tags/传统-View-迁移/" title="传统 View 迁移">传统 View 迁移 </a><span class="leancloud_visitors"></span><span>大约7514个字, 25分钟2秒读完</span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,http://puppet16.github.io/2025/08/23/JetpackCompose学习系列一/,Puppet,JetpackCompose学习系列一：基本概念与传统 View 迁移,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2025/09/03/JetpackCompose%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%BA%8C/" title="JetpackCompose学习系列二： 状态订阅与自动更新">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2025/03/08/JNI%E4%B8%8EFFmpeg%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" title="JNI与FFmpeg基本语法">下一篇</a></li></ul></div><script src="/js/visitors.js"></script><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@latest/dist/Valine.min.js"></script><script>var valine = new Valine({
  el:'#vcomments',
  notify:false || false, 
  verify:false|| false, 
  app_id:'xpSQCFiXzEQnCBUKrP6EHIUF-gzGzoHsz',
  app_key:'Ev5N03MrqLzS683mu92hf4RO',
  placeholder:'行至水穷处，坐看云起时...',
  path: window.location.pathname,
  serverURLs: '',
  visitor:true,
  recordIP:true,
  avatar:'mm'
})</script></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><!-- Mermaid diagrams support--><script src="https://unpkg.com/mermaid@10.9.1/dist/mermaid.min.js"></script><script>if (window.mermaid) {
  mermaid.initialize({
    startOnLoad: true,
    securityLevel: 'loose',
    flowchart: { htmlLabels: true, useMaxWidth: true },
    classDiagram: {
      layout: 'elk',
      elk: {
        'elk.spacing.nodeNodeBetweenLayers': 200,
        'elk.spacing.nodeNode': 80
      }
    },
    theme: 'default',
    logLevel: 1
  });
}</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"debug":false,"model":{"scale":1,"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"left","hOffset":0,"vOffset":20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"dialog":{"enable":false,"hitokoto":true}});</script></body></html>